<script>
  let choices = ["Rock", "Paper", "Scissors"];

  function computerPlay() {
    let randomNumber = Math.floor(Math.random() * 3);
    return choices[randomNumber];
  }
  // Check computerPlay() works
  console.log(computerPlay());

  // Check if player's choice is valid
  function validateChoice(word) {
    if (typeof word === undefined) {
      confirm(`${word} is not a valid choice. Try again!`);
      return;
    }
    if (typeof word === Number) {
      confirm(`${word} is a number and is not a valid choice. Try again!`);
      return;
    }
  }

  // Lower and capitalize player's choice if not blank
  function lowerThenCapitalize(word) {
    if (word === "") {
      return "Blanks cannot play here, pick a choice instead!";
    } else {
      return `${word[0].toUpperCase()}${word.slice(1).toLowerCase()}`;
    }
  }

  // Function that plays one round of rock/paper/scissors between a user and computer
  function playRound(playerSelection, computerSelection) {
    console.log(playerSelection);
    console.log(choices);

    // let choices = ["Rock", "Paper", "Scissors"];
    // create cases of what playerSelection can be
    if (choices.includes(playerSelection)) {
      if (playerSelection === computerSelection) {
        confirm(`It's a tie! You both chose ${playerSelection}!`);
        return "tie";
      } else if (
        (playerSelection === "Rock" && computerSelection === "Scissors") ||
        (playerSelection === "Paper" && computerSelection === "Rock") ||
        (playerSelection === "Scissors" && computerSelection === "Paper")
      ) {
        confirm(`You win! ${playerSelection} beats ${computerSelection}!`);
        return "win";
        `You win! ${playerSelection} beats ${computerSelection}!`;
      } else {
        confirm(`You lose! ${computerSelection} beats ${playerSelection}.`);
        return "lose";
      }
    } else {
      confirm(`${playerSelection} is not one of the choices. Try again!`);
      return `${playerSelection} is not one of the choices. Try again!`;
    }
  }

  // Create a game function that plays 5 rounds
  function game() {
    let playerScore = 0;
    let computerScore = 0;
    let turns = 0;

    while (turns < 5) {
      let computerChoice = computerPlay();
      let promptPlayerChoice = prompt("Rock, Paper, Scissors says...", "");
      let playerChoice = lowerThenCapitalize(promptPlayerChoice);

      let result = playRound(playerChoice, computerChoice);
      if (result === "tie") {
        continue;
      } else if (result === "win") {
        playerScore += 1;
      } else if (result === "lose") {
        computerScore += 1;
      } else {
        continue;
      }

      confirm(
        `Current score is ${playerScore} for you and ${computerScore} for the computer.`
      );
    }

    if (playerScore > computerScore) {
      return confirm(
        `The final score is ${playerScore}:${computerScore}, so you win! Huzzah!!!`
      );
    }
    if (computerScore > playerScore) {
      return confirm(
        `The final score is ${playerScore}:${computerScore}, so you lose! Better luck next time.`
      );
    }
    if (playerScore === computerScore) {
      return confirm(
        `The final score is ${playerScore}:${computerScore}. Looks like a tie!`
      );
    }
  }

  console.log(game());
</script>
